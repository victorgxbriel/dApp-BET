<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html version="-//W3C//DTD XHTML 1.1//EN"
      xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.w3.org/1999/xhtml
                          http://www.w3.org/MarkUp/SCHEMA/xhtml11.xsd"
>

	<head>
		<meta charset="utf-8" />
		<title>Cassino MetaMask</title>
		<link type="text/css" rel="stylesheet" href="style.css" />
		<script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
		<script type="text/javascript">
			var credito = 0;
			var aux = 0;
			var aposta = 1;
			var nSort = 0;
			var slt1, slt2, slt3, slt4;

			document.addEventListener('DOMContentLoaded', async () => {
				if (window.ethereum) {
					window.web3 = new Web3(window.ethereum);

					try {
						await window.ethereum.enable();
						console.log("MetaMask conectado!");
					} catch (error) {
						console.error("Erro ao conectar o MetaMask:", error);
					}
				} else {
					console.error('MetaMask não detectado. Por favor, instale o MetaMask para continuar.');
				}
			});

			async function apostar() {
				// Substitua o endereço do contrato e o ABI com os valores reais
				const contractAddress = '0x63EDa3652a2067e881EE1Adce9b5949b4D0e38c3';
				const contractABI = [
					// Cole aqui o ABI do seu contrato
				];

				const contract = new window.web3.eth.Contract(contractABI, contractAddress);

				// Valor a ser apostado
				const value = aposta;

				// Chama a função apostar no contrato
				await contract.methods.apostar(value).send({ from: window.web3.eth.defaultAccount });

				console.log("Aposta realizada com sucesso!");
			}

			async function resgatar() {
				// Substitua o endereço do contrato e o ABI com os valores reais
				const contractAddress = '0x63EDa3652a2067e881EE1Adce9b5949b4D0e38c3';
				const contractABI = [
					// Cole aqui o ABI do seu contrato
				];

				const contract = new window.web3.eth.Contract(contractABI, contractAddress);

				// Chama a função resgatar no contrato
				await contract.methods.resgatar().send({ from: window.web3.eth.defaultAccount });

				console.log("Resgate realizado com sucesso!");
			}

			async function obterApostas() {
				// Substitua o endereço do contrato e o ABI com os valores reais
				const contractAddress = '0x63EDa3652a2067e881EE1Adce9b5949b4D0e38c3';
				const contractABI = [
					// Cole aqui o ABI do seu contrato
				];

				const contract = new window.web3.eth.Contract(contractABI, contractAddress);

				// Chama a função apostas no contrato
				const result = await contract.methods.apostas().call({ from: window.web3.eth.defaultAccount });

				console.log("Apostas obtidas:", result);
			}
			
			function aleatorio(inferior,superior){ 
				numPossibilidades = superior - inferior; 
				aleat = Math.random() * numPossibilidades;
				aleat = Math.floor(aleat);
				return parseInt(inferior) + aleat;
			}	
			
			function apostaMenos() {
				if (aposta > 1) {
					aposta--;
					document.getElementById('aposta').value = 'R$ ' + aposta;					
				}
			}
			
			function apostaMais() {
				if (aposta < 500) {
					aposta ++;
					document.getElementById('aposta').value = 'R$ ' + aposta;
				}
			}
			
			function verificaPremio() {
				//verifica se ganhou algum prêmio
				
				//inicio dos prêmios menores
				if (slt1 == 1 && slt2 == 2 && slt3 == 3 && slt4 == 4){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}

				if (slt1 == 1 && slt2 == 2 && slt3 == 4 && slt4 == 3){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 1 && slt2 == 3 && slt3 == 2 && slt4 == 4){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 1 && slt2 == 3 && slt3 == 4 && slt4 == 2){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 1 && slt2 == 4 && slt3 == 2 && slt4 == 3){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 1 && slt2 == 4 && slt3 == 3 && slt4 == 2){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 2 && slt2 == 1 && slt3 == 3 && slt4 == 4){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}

				if (slt1 == 2 && slt2 == 1 && slt3 == 4 && slt4 == 3){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 2 && slt2 == 3 && slt3 == 1 && slt4 == 4){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 2 && slt2 == 3 && slt3 == 4 && slt4 == 1){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 2 && slt2 == 4 && slt3 == 1 && slt4 == 3){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 2 && slt2 == 4 && slt3 == 3 && slt4 == 1){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
					
				if (slt1 == 3 && slt2 == 2 && slt3 == 1 && slt4 == 4){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}

				if (slt1 == 3 && slt2 == 2 && slt3 == 4 && slt4 == 1){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 3 && slt2 == 1 && slt3 == 2 && slt4 == 4){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 3 && slt2 == 1 && slt3 == 4 && slt4 == 2){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 3 && slt2 == 4 && slt3 == 2 && slt4 == 1){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 3 && slt2 == 4 && slt3 == 1 && slt4 == 2){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}

				if (slt1 == 4 && slt2 == 2 && slt3 == 3 && slt4 == 1){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}

				if (slt1 == 4 && slt2 == 2 && slt3 == 1 && slt4 == 3){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 4 && slt2 == 3 && slt3 == 2 && slt4 == 1){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 4 && slt2 == 3 && slt3 == 1 && slt4 == 2){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 4 && slt2 == 1 && slt3 == 2 && slt4 == 3){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 4 && slt2 == 1 && slt3 == 3 && slt4 == 2){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 2);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				//fim dos prêmios menores
				
				//inicio dos premios maiores
				if (slt1 == 1 && slt2 == 1 && slt3 == 1 && slt4 == 1){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 5);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 4 + ".");
				}
				
				if (slt1 == 2 && slt2 == 2 && slt3 == 2 && slt4 == 2){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 10);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 2 + ".");
				}
				
				if (slt1 == 3 && slt2 == 3 && slt3 == 3 && slt4 == 3){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 20);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 5 + ".");
				}
				
				if (slt1 == 4 && slt2 == 4 && slt3 == 4 && slt4 == 4){
					aposta = parseInt(aposta);
					credito = credito + (aposta * 50);
					document.getElementById('credito').value = 'R$ ' + credito;
					window.alert("Parabéns, você ganhou um prêmio de R$ " + aposta * 10 + ".");
				}

				//fim dos prêmios maiores
				
			}
			
			function jogar() {
				if (credito < 1 || credito < aposta) {
					aux = window.prompt("Coloque mais creditos, digite a quantidade em R$:","1");
					aux = parseInt(aux);
					credito = parseInt(credito);
					credito = credito + aux;
					document.getElementById('credito').value = 'R$ ' + credito
				}
				else {
					if(credito > 0 && credito >= aposta){
						credito = credito - aposta;
						document.getElementById('credito').value = 'R$ ' + credito;
						document.getElementById('escud1').src = 'img/roleta.gif';
						document.getElementById('escud2').src = 'img/roleta.gif';
						document.getElementById('escud3').src = 'img/roleta.gif';
						document.getElementById('escud4').src = 'img/roleta.gif';
						
						//processamento do slot1
						nSort = aleatorio(1,5);
						switch (nSort) {
							case 1:
							cont=setTimeout("document.getElementById('escud1').src = 'img/diamante_verde.png'", 4000);
							slt1 = 1;
							break;
							case 2:
							cont=setTimeout("document.getElementById('escud1').src = 'img/diamante_mesclado.png'", 4000);
							slt1 = 2;
							break;
							case 3:
							cont=setTimeout("document.getElementById('escud1').src = 'img/diamante_rosa.png'", 4000);
							slt1 = 3;
							break;
							case 4:
							cont=setTimeout("document.getElementById('escud1').src = 'img/cifrao.png'", 4000);
							slt1 = 4;
							break;
						}
						
						//processamento do slot2
						nSort = aleatorio(1,5);
						switch (nSort) {
							case 1:
							cont=setTimeout("document.getElementById('escud2').src = 'img/diamante_verde.png'", 6000);
							slt2 = 1;
							break;
							case 2:
							cont=setTimeout("document.getElementById('escud2').src = 'img/diamante_mesclado.png'", 6000);
							slt2 = 2;
							break;
							case 3:
							cont=setTimeout("document.getElementById('escud2').src = 'img/diamante_rosa.png'", 6000);
							slt2 = 3;
							break;
							case 4:
							cont=setTimeout("document.getElementById('escud2').src = 'img/cifrao.png'", 6000);
							slt2 = 4;
							break;
						}
						
						//processamento do slot3
						nSort = aleatorio(1,5);
						switch (nSort) {
							case 1:
							cont=setTimeout("document.getElementById('escud3').src = 'img/diamante_verde.png'", 7000);
							slt3 = 1;
							break;
							case 2:
							cont=setTimeout("document.getElementById('escud3').src = 'img/diamante_mesclado.png'", 7000);
							slt3 = 2;
							break;
							case 3:
							cont=setTimeout("document.getElementById('escud3').src = 'img/diamante_rosa.png'", 7000);
							slt3 = 3;
							break;
							case 4:
							cont=setTimeout("document.getElementById('escud3').src = 'img/cifrao.png'", 7000);
							slt3 = 4;
							break;
						}
						
						//processamento do slot4
						nSort = aleatorio(1,5);
						switch (nSort) {
							case 1:
							cont=setTimeout("document.getElementById('escud4').src = 'img/diamante_verde.png'", 8000);
							slt4 = 1;
							break;
							case 2:
							cont=setTimeout("document.getElementById('escud4').src = 'img/diamante_mesclado.png'", 8000);
							slt4 = 2;
							break;
							case 3:
							cont=setTimeout("document.getElementById('escud4').src = 'img/diamante_rosa.png'", 8000);
							slt4 = 3;
							break;
							case 4:
							cont=setTimeout("document.getElementById('escud4').src = 'img/cifrao.png'", 8000);
							slt4 = 4;
							break;
						}
						cont=setTimeout("verificaPremio()", 9000);
					}
				}
			}
		</script>
	</head>
	
	<body>
	
		<div id = "corpo">
		
			<div id = "creditos_txt">
				Saldo
			</div>
			
			<div id = "creditos">
				<form>
					<input id = "credito" type = "text" size = "5" value = "R$ 0" readonly />
				</form>
			</div>
			
			<div id = "valor_txt">
				Valor da Aposta
			</div>
			
			<div id = "valor">
				<form>
					<input id = "aposta" type = "text" size = "1" value = "R$ 1" readonly />
				</form>
			</div>
			
			<div id = "tela">
				<div id = "slot1">
					<img id = "escud1" src = "img/diamante_verde.png" />
				</div>
				<div id = "slot2">
					<img id = "escud2" src = "img/diamante_mesclado.png" />
				</div>
				<div id = "slot3">
					<img id = "escud3" src = "img/diamante_rosa.png" />
				</div>
				<div id = "slot4">
					<img id = "escud4" src = "img/cifrao.png" />
				</div>
			</div>
			
			<div id = "botoes">
				<img src = "img/apostamenos.gif" onMouseDown="this.src='img/apostamenos_p.gif';" onMouseUp="this.src='img/apostamenos.gif';" onclick = "apostaMenos();" />
				<img src = "img/apostamais.gif" onMouseDown="this.src='img/apostamais_p.gif';" onMouseUp="this.src='img/apostamais.gif';" onclick = "apostaMais();"/>
				<img src = "img/jogar.gif" onMouseDown="this.src='img/jogar_p.gif';" onMouseUp="this.src='img/jogar.gif';" onclick = "jogar();"/>
			</div>
			
			<div id = "rodapé">
				<a href = "tabela.html" target='_blank'>Clique aqui para ver a Tabela de prêmios que você poderá ganhar neste jogo!</a>
			</div>
		
		</div>
	
	</body>

</html>
